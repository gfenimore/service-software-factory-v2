{
  "version": "1.0.0",
  "metadata": {
    "created": "2025-08-23",
    "description": "Service Software Business Unified Schema Model",
    "author": "Service Software Factory"
  },
  "entities": {
    "Account": {
      "description": "Customer account entity",
      "tableName": "accounts",
      "primaryKey": "id",
      "fields": {
        "id": {
          "type": "uuid",
          "required": true,
          "primaryKey": true,
          "description": "Unique account identifier"
        },
        "accountNumber": {
          "type": "string",
          "required": true,
          "unique": true,
          "constraints": {
            "pattern": "^ACC-[0-9]{6}$"
          },
          "description": "System-generated account number"
        },
        "accountName": {
          "type": "string",
          "required": true,
          "essential": true,
          "phase": 1,
          "constraints": {
            "minLength": 3,
            "maxLength": 100
          },
          "description": "Legal name of the account"
        },
        "dbaName": {
          "type": "string",
          "required": false,
          "phase": 2,
          "constraints": {
            "maxLength": 100
          },
          "description": "Doing Business As name"
        },
        "accountType": {
          "type": "enum",
          "enum": "AccountType",
          "required": true,
          "essential": true,
          "phase": 1,
          "description": "Type of account"
        },
        "status": {
          "type": "enum",
          "enum": "AccountStatus",
          "required": true,
          "essential": true,
          "phase": 1,
          "default": "Pending",
          "description": "Current account status"
        },
        "email": {
          "type": "email",
          "required": false,
          "essential": true,
          "phase": 1,
          "validation": [
            {
              "pattern": "^[\\w\\.]+@[\\w\\.]+\\.[a-z]{2,}$",
              "message": "Invalid email format"
            }
          ],
          "description": "Primary email address"
        },
        "phone": {
          "type": "phone",
          "required": false,
          "essential": true,
          "phase": 1,
          "validation": [
            {
              "pattern": "^\\+?[1-9]\\d{1,14}$",
              "message": "Invalid phone format"
            }
          ],
          "description": "Primary phone number"
        },
        "website": {
          "type": "url",
          "required": false,
          "phase": 2,
          "description": "Company website"
        },
        "address": {
          "type": "string",
          "required": false,
          "essential": true,
          "phase": 1,
          "constraints": {
            "maxLength": 500
          },
          "description": "Primary address"
        },
        "city": {
          "type": "string",
          "required": false,
          "phase": 1,
          "constraints": {
            "maxLength": 100
          }
        },
        "state": {
          "type": "string",
          "required": false,
          "phase": 1,
          "constraints": {
            "maxLength": 50
          }
        },
        "zipCode": {
          "type": "string",
          "required": false,
          "phase": 1,
          "constraints": {
            "pattern": "^\\d{5}(-\\d{4})?$"
          }
        },
        "country": {
          "type": "string",
          "required": false,
          "phase": 2,
          "default": "USA"
        },
        "taxId": {
          "type": "string",
          "required": false,
          "phase": 2,
          "complexity": "advanced",
          "constraints": {
            "pattern": "^\\d{2}-\\d{7}$"
          },
          "description": "Federal tax ID"
        },
        "dunsNumber": {
          "type": "string",
          "required": false,
          "phase": 3,
          "complexity": "advanced",
          "constraints": {
            "length": 9
          },
          "description": "Dun & Bradstreet number"
        },
        "creditLimit": {
          "type": "decimal",
          "required": false,
          "phase": 2,
          "complexity": "advanced",
          "constraints": {
            "min": 0,
            "max": 1000000
          },
          "description": "Credit limit in dollars"
        },
        "paymentTerms": {
          "type": "enum",
          "enum": "PaymentTerms",
          "required": false,
          "phase": 2,
          "default": "Net30",
          "description": "Payment terms"
        },
        "industry": {
          "type": "enum",
          "enum": "Industry",
          "required": false,
          "phase": 2
        },
        "numberOfEmployees": {
          "type": "integer",
          "required": false,
          "phase": 3,
          "constraints": {
            "min": 0
          }
        },
        "annualRevenue": {
          "type": "decimal",
          "required": false,
          "phase": 3,
          "complexity": "advanced"
        },
        "territoryId": {
          "type": "uuid",
          "required": false,
          "phase": 2,
          "foreignKey": "Territory.id"
        },
        "ownerId": {
          "type": "uuid",
          "required": true,
          "phase": 1,
          "foreignKey": "User.id",
          "description": "Account owner"
        },
        "createdBy": {
          "type": "uuid",
          "required": true,
          "foreignKey": "User.id",
          "system": true
        },
        "createdAt": {
          "type": "datetime",
          "required": true,
          "system": true
        },
        "updatedBy": {
          "type": "uuid",
          "required": false,
          "foreignKey": "User.id",
          "system": true
        },
        "updatedAt": {
          "type": "datetime",
          "required": false,
          "system": true
        }
      }
    },
    "Contact": {
      "description": "Contact person for an account",
      "tableName": "contacts",
      "primaryKey": "id",
      "fields": {
        "id": {
          "type": "uuid",
          "required": true,
          "primaryKey": true
        },
        "firstName": {
          "type": "string",
          "required": true,
          "phase": 1,
          "constraints": {
            "maxLength": 50
          }
        },
        "lastName": {
          "type": "string",
          "required": true,
          "phase": 1,
          "constraints": {
            "maxLength": 50
          }
        },
        "title": {
          "type": "string",
          "required": false,
          "phase": 1,
          "constraints": {
            "maxLength": 100
          }
        },
        "email": {
          "type": "email",
          "required": true,
          "phase": 1
        },
        "phone": {
          "type": "phone",
          "required": false,
          "phase": 1
        },
        "mobile": {
          "type": "phone",
          "required": false,
          "phase": 2
        },
        "accountId": {
          "type": "uuid",
          "required": true,
          "phase": 1,
          "foreignKey": "Account.id"
        },
        "isPrimary": {
          "type": "boolean",
          "required": false,
          "phase": 1,
          "default": false
        },
        "department": {
          "type": "string",
          "required": false,
          "phase": 2
        },
        "notes": {
          "type": "text",
          "required": false,
          "phase": 2
        },
        "createdAt": {
          "type": "datetime",
          "required": true,
          "system": true
        },
        "updatedAt": {
          "type": "datetime",
          "required": false,
          "system": true
        }
      }
    },
    "User": {
      "description": "System user",
      "tableName": "users",
      "primaryKey": "id",
      "fields": {
        "id": {
          "type": "uuid",
          "required": true,
          "primaryKey": true
        },
        "username": {
          "type": "string",
          "required": true,
          "unique": true,
          "phase": 1
        },
        "email": {
          "type": "email",
          "required": true,
          "unique": true,
          "phase": 1
        },
        "firstName": {
          "type": "string",
          "required": true,
          "phase": 1
        },
        "lastName": {
          "type": "string",
          "required": true,
          "phase": 1
        },
        "role": {
          "type": "enum",
          "enum": "UserRole",
          "required": true,
          "phase": 1
        },
        "isActive": {
          "type": "boolean",
          "required": true,
          "default": true,
          "phase": 1
        }
      }
    },
    "Territory": {
      "description": "Sales territory",
      "tableName": "territories",
      "primaryKey": "id",
      "fields": {
        "id": {
          "type": "uuid",
          "required": true,
          "primaryKey": true
        },
        "name": {
          "type": "string",
          "required": true,
          "phase": 2
        },
        "code": {
          "type": "string",
          "required": true,
          "unique": true,
          "phase": 2
        },
        "managerId": {
          "type": "uuid",
          "required": false,
          "phase": 2,
          "foreignKey": "User.id"
        }
      }
    },
    "Service": {
      "description": "Service offering",
      "tableName": "services",
      "primaryKey": "id",
      "fields": {
        "id": {
          "type": "uuid",
          "required": true,
          "primaryKey": true
        },
        "serviceName": {
          "type": "string",
          "required": true,
          "phase": 1
        },
        "serviceCode": {
          "type": "string",
          "required": true,
          "unique": true,
          "phase": 1
        },
        "description": {
          "type": "text",
          "required": false,
          "phase": 1
        },
        "category": {
          "type": "enum",
          "enum": "ServiceCategory",
          "required": true,
          "phase": 1
        },
        "price": {
          "type": "decimal",
          "required": true,
          "phase": 1
        },
        "unit": {
          "type": "enum",
          "enum": "ServiceUnit",
          "required": true,
          "phase": 1
        },
        "isActive": {
          "type": "boolean",
          "required": true,
          "default": true,
          "phase": 1
        }
      }
    }
  },
  "relationships": {
    "Account.contacts": {
      "name": "contacts",
      "type": "one-to-many",
      "from": "Account",
      "to": "Contact",
      "foreignKey": "accountId",
      "cascade": "delete"
    },
    "Account.owner": {
      "name": "owner",
      "type": "many-to-one",
      "from": "Account",
      "to": "User",
      "foreignKey": "ownerId"
    },
    "Account.territory": {
      "name": "territory",
      "type": "many-to-one",
      "from": "Account",
      "to": "Territory",
      "foreignKey": "territoryId"
    },
    "Territory.manager": {
      "name": "manager",
      "type": "many-to-one",
      "from": "Territory",
      "to": "User",
      "foreignKey": "managerId"
    }
  },
  "enums": {
    "AccountType": {
      "values": ["Residential", "Commercial", "Industrial", "Government", "Non-Profit", "Other"],
      "default": "Commercial"
    },
    "AccountStatus": {
      "values": ["Pending", "Active", "Inactive", "Suspended", "Archived"],
      "default": "Pending"
    },
    "PaymentTerms": {
      "values": ["Due on Receipt", "Net15", "Net30", "Net45", "Net60", "Custom"],
      "default": "Net30"
    },
    "Industry": {
      "values": ["Technology", "Healthcare", "Finance", "Retail", "Manufacturing", "Education", "Government", "Other"],
      "default": "Other"
    },
    "UserRole": {
      "values": ["Admin", "Manager", "Sales", "Service", "Support", "ReadOnly"],
      "default": "Sales"
    },
    "ServiceCategory": {
      "values": ["Installation", "Maintenance", "Repair", "Inspection", "Consultation", "Emergency", "Other"],
      "default": "Maintenance"
    },
    "ServiceUnit": {
      "values": ["Hour", "Day", "Week", "Month", "Unit", "Job", "Visit"],
      "default": "Hour"
    }
  }
}