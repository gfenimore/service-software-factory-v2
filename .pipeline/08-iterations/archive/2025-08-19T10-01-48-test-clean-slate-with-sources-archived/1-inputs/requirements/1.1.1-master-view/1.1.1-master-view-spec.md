# Master View Sub-Module
**Version**: 1.0  
**Module**: Account Management (1.1)  
**Sub-Module ID**: 1.1.1  
**Created**: 2025-08-18  
**Status**: Concept Development

## Feature Purpose
Provide a three-column browser interface for rapid navigation through accounts, service locations, and work orders, enabling users to quickly find and act on information without losing context.

## Business Value
- **10x Faster Navigation**: Jump between accounts without page loads
- **Context Preservation**: See relationships at a glance
- **Bulk Visibility**: Monitor multiple work orders simultaneously
- **Efficient Workflow**: Reduce clicks from 5-7 to 1-2 for common tasks

## User Experience
### Three-Column Layout
```
┌─────────────┬──────────────┬──────────────┐
│  Accounts   │   Locations  │ Work Orders  │
├─────────────┼──────────────┼──────────────┤
│ ▶ ABC Corp  │ 📍 Main HQ   │ 🔧 HVAC Fix  │
│   XYZ Inc   │ 📍 Warehouse │ 🔧 Pest Svc  │
│   123 Home  │ 📍 Branch 1  │ ✓ Completed  │
└─────────────┴──────────────┴──────────────┘
```

### Interaction Model
1. **Progressive Disclosure**: Click account → shows its locations → shows work orders
2. **Multi-Select**: Shift/Ctrl click for bulk operations
3. **Quick Actions**: Right-click context menus
4. **Keyboard Navigation**: Arrow keys, Tab, Enter for accessibility
5. **Search & Filter**: Per-column filtering with real-time results

## User Stories (1.1.1.x)
### 1.1.1.1 US-004: Accounts Column
- Display all accounts with search/filter
- Show account type indicators (C/R/I)
- Visual status indicators (active/inactive)
- Click to load related locations

### 1.1.1.2 US-006: Service Locations Column  
- Display locations for selected account
- Show service status indicators
- Display next service date
- Click to load related work orders

### 1.1.1.3 US-008: Work Orders Column
- Display work orders for selected location
- Show status with color coding
- Display scheduled date/time
- Quick status update actions

### 1.1.1.4 US-010: Integrated Actions (Planned)
- Cross-column bulk operations
- Drag-and-drop between columns
- Quick-create from any column

## Interface Contract
### Events Provided
```typescript
MasterView.provides = {
  "account:selected": AccountSelectionEvent,
  "location:selected": LocationSelectionEvent,
  "workOrder:selected": WorkOrderSelectionEvent,
  "filter:changed": FilterChangeEvent,
  "bulk:selected": BulkSelectionEvent
}
```

### Events Consumed
```typescript
MasterView.consumes = {
  "detail-view:closed": RefreshDataHandler,
  "workOrder:updated": UpdateDisplayHandler,
  "account:created": AddToListHandler
}
```

### State Exposed
```typescript
MasterView.state = {
  selectedAccount: Account | null,
  selectedLocation: Location | null,
  selectedWorkOrder: WorkOrder | null,
  visibleData: {
    accounts: Account[],
    locations: Location[],
    workOrders: WorkOrder[]
  }
}
```

## Progressive Development Plan

### Concept Line ✅ (Current)
**Goal**: Validate UX and workflow
- Simple HTML/CSS layout
- Mock data (50 accounts, 200 locations, 500 work orders)
- Console.log for all interactions
- Any types everywhere
- No error handling
- Inline styles

**Validation Criteria**:
- Users can navigate to any work order in < 3 clicks
- Column relationships are intuitive
- Performance is acceptable with mock data

### Prototype Line 🔄 (Next)
**Goal**: Integrate with real systems
- React components with TypeScript
- Real API connections
- React Query for caching
- Proper event bus
- Error boundaries
- CSS modules

**Validation Criteria**:
- Handles 1000+ accounts smoothly
- API errors handled gracefully  
- State management is predictable

### Production Line 📦 (Future)
**Goal**: Enterprise-ready
- Full accessibility (WCAG 2.1)
- Virtualization for large lists
- Optimistic updates
- Offline support
- Comprehensive testing
- Performance monitoring

**Validation Criteria**:
- 99.9% uptime
- < 2 second load time
- Handles 10,000+ records
- Zero data loss

## Technical Specifications

### Data Requirements
```yaml
Accounts:
  minLoadCount: 50
  maxDisplayCount: 1000
  lazyLoadThreshold: 100
  
Locations:
  avgPerAccount: 3-5
  maxPerAccount: 100
  
WorkOrders:
  avgPerLocation: 5-10
  retentionDays: 90
  statuses: [pending, scheduled, in-progress, completed, cancelled]
```

### Performance Targets
- Initial render: < 1 second
- Column updates: < 200ms  
- Search response: < 100ms
- Scroll performance: 60 fps

### Browser Support
- Chrome/Edge 90+
- Firefox 88+
- Safari 14+
- Mobile responsive (tablet+)

## Integration Points
### With Detail View (1.1.2)
- Master View emits selection events
- Detail View opens with selected entity
- Detail View reports back changes
- Master View refreshes affected data

### With Work Order Management (1.2.1)
- Master View provides context
- Work Orders filter by selection
- Updates flow bidirectionally

## Success Metrics
1. **Efficiency**: 50% reduction in navigation time
2. **Adoption**: 90% of users prefer over old system
3. **Performance**: All interactions < 200ms
4. **Reliability**: Zero data inconsistencies

## Promotion Criteria
**Concept → Prototype**:
- All three columns implemented
- User feedback incorporated
- Workflow validated with stakeholders
- No blocking UX issues

**Prototype → Production**:
- All APIs integrated
- 70% test coverage achieved
- Performance targets met
- Security review passed

## Dependencies
- Account API (GET /accounts)
- Location API (GET /locations)
- Work Order API (GET /work-orders)
- Event Bus implementation
- UI Component library

## Risks
| Risk | Probability | Impact | Mitigation |
|------|------------|--------|------------|
| Too much data | Medium | High | Implement virtualization |
| Complex state | High | Medium | Use state machine |
| Browser performance | Low | High | Progressive loading |
| User confusion | Medium | Medium | Training & tooltips |

## Notes
- This is THE most critical UI component
- Gets 80% of user interactions
- Must be intuitive without training
- Performance is non-negotiable